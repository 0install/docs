<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>zeroinstall.injector.handler.Handler</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="zeroinstall-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://0install.net">Project Homepage</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="zeroinstall-module.html">Package&nbsp;zeroinstall</a> ::
        <a href="zeroinstall.injector-module.html">Package&nbsp;injector</a> ::
        <a href="zeroinstall.injector.handler-module.html">Module&nbsp;handler</a> ::
        Class&nbsp;Handler
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="zeroinstall.injector.handler.Handler-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class Handler</h1><span class="codelink"><a href="zeroinstall.injector.handler-pysrc.html#Handler">source&nbsp;code</a></span><br /><br />
<pre class="base-tree">
object --+
         |
        <strong class="uidshort">Handler</strong>
</pre>

<hr />
<p>Integrates download callbacks with an external mainloop. While things 
  are being downloaded, Zero Install returns control to your program. Your 
  mainloop is responsible for monitoring the state of the downloads and 
  notifying Zero Install when they are complete.</p>
  To do this, you supply a <a 
  href="zeroinstall.injector.handler.Handler-class.html" 
  class="link">Handler</a> to the <a 
  href="zeroinstall.injector.policy-module.html" class="link">policy</a>. 
  To integrate with your own mainloop, you can either subclass or replace 
  this.<br /><br />

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type">&nbsp;</code>
  </td><td class="summary">
    <span class="summary-sig"><a href="zeroinstall.injector.handler.Handler-class.html#__init__" class="summary-sig-name">__init__</a>(<span class="summary-sig-arg">self</span>)</span><br />
      x.__init__(...) initializes x; see x.__class__.__doc__ for 
      signature
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type">&nbsp;</code>
  </td><td class="summary">
    <span class="summary-sig"><a href="zeroinstall.injector.handler.Handler-class.html#monitor_download" class="summary-sig-name">monitor_download</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">dl</span>)</span><br />
      Called when a new <a 
      href="zeroinstall.injector.download-module.html" 
      class="link">download</a> is started.
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type">&nbsp;</code>
  </td><td class="summary">
    <span class="summary-sig"><a href="zeroinstall.injector.handler.Handler-class.html#wait_for_downloads" class="summary-sig-name">wait_for_downloads</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Monitor all downloads, waiting until they are complete.
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type"><a href="zeroinstall.injector.download.Download-class.html" 
      class="link">download.Download</a></code>
  </td><td class="summary">
    <span class="summary-sig"><a href="zeroinstall.injector.handler.Handler-class.html#get_download" class="summary-sig-name">get_download</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">url</span>,
        <span class="summary-sig-arg">force</span>=<span class="summary-sig-default">False</span>)</span><br />
      Return the Download object currently downloading 'url'.
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type">&nbsp;</code>
  </td><td class="summary">
    <span class="summary-sig"><a href="zeroinstall.injector.handler.Handler-class.html#confirm_trust_keys" class="summary-sig-name">confirm_trust_keys</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">interface</span>,
        <span class="summary-sig-arg">sigs</span>,
        <span class="summary-sig-arg">iface_xml</span>)</span><br />
      We don't trust any of the signatures yet.
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type">&nbsp;</code>
  </td><td class="summary">
    <span class="summary-sig"><a href="zeroinstall.injector.handler.Handler-class.html#report_error" class="summary-sig-name">report_error</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">exception</span>)</span><br />
      Report an exception to the user.
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__new__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__str__</code>
      </p>
    </td>
  </tr>
</table>

<br />
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type">&nbsp;</code>
  </td><td class="summary">
    <a href="zeroinstall.injector.handler.Handler-class.html#__slots__">__slots__</a> = <code title="['monitored_downloads']">['monitored_downloads']</code>
  </td>
</tr>
</table>

<br />
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Properties</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Properties"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>

<br />
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__init__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__init__</span>(<span class="sig-arg">self</span>)</span>
    <br /><em class="fname">(Constructor)</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="zeroinstall.injector.handler-pysrc.html#Handler.__init__">source&nbsp;code</a></span>&nbsp;</span
    ></td>
  </table>
  
  x.__init__(...) initializes x; see x.__class__.__doc__ for 
  signature
  <dl><dt></dt><dd>
    <dl><dt>Overrides:
      object.__init__
        <dd><em class="note">(inherited documentation)</em></dd>
    </dt></dl>
  </dd></dl>
</td></tr></table>
</div>
<a name="monitor_download"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">monitor_download</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">dl</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="zeroinstall.injector.handler-pysrc.html#Handler.monitor_download">source&nbsp;code</a></span>&nbsp;</span
    ></td>
  </table>
  
  Called when a new <a href="zeroinstall.injector.download-module.html" 
  class="link">download</a> is started. Call <a 
  href="zeroinstall.injector.download.Download-class.html#start" 
  class="link">download.Download.start</a> to start the download and get 
  the error stream, and then call <a 
  href="zeroinstall.injector.download.Download-class.html#error_stream_data"
  class="link">download.Download.error_stream_data</a> whenever you read 
  any data from it, including nothing (end-of-file), which indicates that 
  the download is finished.
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>
</div>
<a name="wait_for_downloads"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">wait_for_downloads</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="zeroinstall.injector.handler-pysrc.html#Handler.wait_for_downloads">source&nbsp;code</a></span>&nbsp;</span
    ></td>
  </table>
  
  Monitor all downloads, waiting until they are complete. This is 
  suitable for use by non-interactive programs.
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>
</div>
<a name="get_download"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_download</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">url</span>,
        <span class="sig-arg">force</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="zeroinstall.injector.handler-pysrc.html#Handler.get_download">source&nbsp;code</a></span>&nbsp;</span
    ></td>
  </table>
  
  Return the Download object currently downloading 'url'. If no download
  for this URL has been started, start one now (and start monitoring it). 
  If the download failed and force is False, return it anyway. If force is 
  True, abort any current or failed download and start a new one.
  <dl><dt></dt><dd>
    <dl><dt>Returns: <code><a href="zeroinstall.injector.download.Download-class.html" 
      class="link">download.Download</a></code></dt></dl>
  </dd></dl>
</td></tr></table>
</div>
<a name="confirm_trust_keys"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">confirm_trust_keys</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">interface</span>,
        <span class="sig-arg">sigs</span>,
        <span class="sig-arg">iface_xml</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="zeroinstall.injector.handler-pysrc.html#Handler.confirm_trust_keys">source&nbsp;code</a></span>&nbsp;</span
    ></td>
  </table>
  
  We don't trust any of the signatures yet. Ask the user. When done 
  update the <a href="zeroinstall.injector.trust-module.html" 
  class="link">trust</a> database, and then call <a 
  href="zeroinstall.injector.trust.TrustDB-class.html#notify" 
  class="link">trust.TrustDB.notify</a>.
  <dl><dt></dt><dd>
    <dl><dt>Parameters:</dt></dl>
    <ul class="nomargin">
        <li><strong class="pname"><code>interface</code></strong> - the interface being updated</li>
        <li><strong class="pname"><code>sigs</code></strong> - a list of signatures (from <a 
          href="zeroinstall.injector.gpg-module.html#check_stream" 
          class="link">gpg.check_stream</a>)</li>
        <li><strong class="pname"><code>iface_xml</code></strong> - the downloaded data (not yet trusted)</li>
    </ul>
  </dd></dl>
</td></tr></table>
</div>
<a name="report_error"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">report_error</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">exception</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="zeroinstall.injector.handler-pysrc.html#Handler.report_error">source&nbsp;code</a></span>&nbsp;</span
    ></td>
  </table>
  
  Report an exception to the user.
  <dl><dt></dt><dd>
    <dl><dt>Parameters:</dt></dl>
    <ul class="nomargin">
        <li><strong class="pname"><code>exception</code></strong> (<code><a href="zeroinstall.SafeException-class.html" 
          class="link">SafeException</a></code>) - the exception to report</li>
    </ul>
      <p><strong>Since:</strong>
        0.25
      </p>
  </dd></dl>
</td></tr></table>
</div>
<br />
<!-- ==================== CLASS VARIABLE DETAILS ==================== -->
<a name="section-ClassVariableDetails"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variable Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariableDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__slots__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">__slots__</h3>
  None
  <dl><dt></dt><dd>
    <dl><dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
['monitored_downloads']                                                
      </pre></td></tr></table></dd>
    </dl>
  </dd></dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="zeroinstall-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://0install.net">Project Homepage</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">Generated by Epydoc
        3.0alpha3 on Sat Feb 10 12:48:29 2007</td>
    <td align="right" class="footer">
      <a href="http://epydoc.sourceforge.net">http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie()
  // -->
</script>
  
</body>
</html>
