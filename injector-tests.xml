<?xml version='1.0' encoding='utf-8'?>
<html lang="en">

<h2>The Injector: Tests</h2>

<p>
This page contains various tests for the injector itself.
</p>

<h2>Unit tests</h2>

<p>
The injector comes with a suite of unit tests. To run
them, <a href='injector.html'>install the injector</a> and then type:
</p>

<pre>
$ <b>cd tests</b>
$ <b>./testall</b>
testDownload (testautopolicy.TestAutoPolicy) ... ok
[...]
testParallel (testtrust.TestTrust) ... ok
----------------------------------------------------------------------
Ran 36 tests in 0.862s

OK
</pre>

<p>
The unit tests do not perform any network access.
</p>

<h2>Interfaces</h2>

<p>
This section contains some interfaces which test various features of the
injector. Before each test, create a new home directory for the test:
</p>

<pre>
$ <b>export HOME=/tmp/injector-test</b>
$ <b>rm -rf /tmp/injector-test; 0launch -cv <i>URL</i></b>
</pre>

<dl>

<dt>http://0install.net/tests/missing</dt>

<dd>Interface does not exist. You should get a sensible error message.
</dd>

<dt>http://0install.net/tests/newkey</dt>

<dd>This interface is signed with an unknown key. The key should be downloaded
automatically, and you should be prompted to confirm that you trust it.
</dd>

<dt>http://0install.net/tests/badurl</dt>
<dd>
This is a correctly signed interface, but at the wrong URL. The injector
should reject it.
</dd>

<dt>http://0install.net/tests/newkey.xml</dt>
<dd>
This interface is not signed. It should be rejected.
</dd>

<dt>http://0install.net/tests/badsig</dt>
<dd>
This interface has been tampered with. It should be rejected.
</dd>

<dt>http://0install.net/tests/multisig</dt>
<dd>
This interface has been signed with multiple keys. You should be prompted
to confirm both.
</dd>

<dt>http://0install.net/tests/master</dt>
<dd>
This interface contains no implementations itself, but has two additional
feeds. The first is always available (sha1=123), while the second will only be
fetched if 'PPC' binaries are supported (sha1=456). (note that the
implementations cannot actually be downloaded).
</dd>

<dt><a href='http://0install.net/tests/xmlsig.xml'>http://0install.net/tests/xmlsig.xml</a></dt>
<dd>
This interface is signed sightly differently. The signature appears in an
XML comment block at the end (meaning that the whole file including the
signature is a valid XML document). It should be accepted (requires
injector version 0.18 or later).
</dd>

<dt><a href='http://0install.net/tests/Tgif.xml'>http://0install.net/tests/Tgif.xml</a></dt>
<dd>
The archive is in RPM format (so you can install directly from the version on bourbon.usc.edu).
It requires injector version 0.18 or later. It will also work on non-RPM systems like Debian.
</dd>

<dt><a href='http://0install.net/tests/pysol.xml'>http://0install.net/tests/pysol.xml</a></dt>
<dd>
The version downloads a binary in Deb format and then applies a small patch using the
<b>recipe</b> element. It requires injector version 0.20 or later. It will also work on non-Debian
systems like SuSE.
</dd>

<dt><a href='http://0install.net/tests/Visual-ldd.xml'>http://0install.net/tests/Visual-ldd.xml</a></dt>
<dd>
Running this interface downloads a binary in Autopackage format. It requires
injector version 0.21 or later. It does not install or require any autopackage
components.
</dd>

<dt><a href='http://0install.net/tests/GNU-Hello.xml'>http://0install.net/tests/GNU-Hello.xml</a></dt>
<dd>
This program just prints "Hello, world!", except that no binary is available for it, only source.
Go to the interface properties and click on <b>Compile</b> to compile a binary (or you can run
<a href='0compile.html'>0compile</a> on the interface directory if you don't want to use the GUI).
The source code is downloaded directly from ftp.gnu.org and compiled. Once built and registered, you
can run the program again using the URI above to print the greeting.
</dd>

<dt><a href="http://0install.net/tests/Gimp-native.xml">http://0install.net/tests/Gimp-native.xml</a></dt>
<dd>
Starting with 0launch 0.28, you can use Zero Install to run programs installed
using your distribution's package manager. Running this feed will run
/usr/bin/gimp if you are on a Debian-type system and you have the 'gimp' package
installed. Although this feed only includes Debian (and Ubuntu, etc) packages, the idea
is that a single feed can support packages for multiple distributions, plus Zero Install downloads.
</dd>

<dt><a href="http://0install.net/tests/Test-Hello.xml">http://0install.net/tests/Test-Hello.xml</a></dt>
<dd>
This program needs to be compiled, and it depends on another package (GNU-Hello) that also
needs to be compiled. It can be used to test "0compile autocompile", which will download, build
and register both of them at once:
<pre>
$ <b>0compile autocompile http://0install.net/tests/Test-Hello.xml</b>
================= http://0install.net/tests/Test-Hello.xml =================

Selecting versions for Test-Hello...
Selection done.

Plan:

- Test-Hello: Compile 1.0 (sha1new=8c368c5ed6cc65f528efd7b24cc8c25e4490977f)
  - GNU Hello: Compile 1.3 (sha1=2aae32fd27d194167eac7eb611d7ce0983f83dd7)

================= http://0install.net/tests/GNU-Hello.xml ==================

Selecting versions for GNU Hello...
Selection done.

Plan:

- GNU Hello: Compile 1.3 (sha1=2aae32fd27d194167eac7eb611d7ce0983f83dd7)

No dependencies need compiling... compile GNU Hello itself...
[...]
Implementation metadata written to /tmp/home/.config/0install.net/0compile/builds/http:##0install.net#tests#GNU-Hello.xml/GNU-Hello-1.3-x86_64.xml
Storing build in cache...
Registering feed...

Selecting versions for Test-Hello...
Selection done.

Plan:

- Test-Hello: Compile 1.0 (sha1new=8c368c5ed6cc65f528efd7b24cc8c25e4490977f)
  - GNU Hello: Use existing binary 1.3 (Linux-x86_64)

No dependencies need compiling... compile Test-Hello itself...
[...]
Implementation metadata written to /tmp/home/.config/0install.net/0compile/builds/http:##0install.net#tests#Test-Hello.xml/Test-Hello-1.0-x86_64.xml
Storing build in cache...
Registering feed...
$ <b>0launch http://0install.net/tests/Test-Hello.xml</b>
GNU-Hello says: Hello, world!
</pre>
</dd>

</dl>

</html>
